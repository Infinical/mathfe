<section class="screenshots grey-bg" id="courses">

<div class="container">
  
  <!-- SECTION HEADER -->
  <div class="section-header wow fadeIn animated" data-wow-offset="10" data-wow-duration="1.5s">
    
    <!-- SECTION TITLE -->
    <h2 class="dark-text">All Questions</h2>
    
    <div class="colored-line">
    </div>
    
  </div>
  <!-- /END SECTION HEADER -->
  
  <div class="col-md-12">
    <div>
        <a [routerLink]="['/admin/']" class="btn btn-default"> Back</a>
        <a [routerLink]="['/admin/questions/create']" style="margin-left: 0.5rem;" class="btn btn-success"> New Question</a>
    </div>
  </div>

  <div class="col-md-12">
  	<div class="table-responsive">

  		<mat-paginator [pageSizeOptions]="[20]" (page)="pageEvent = $event; onPaginateChange($event)"></mat-paginator>
  		<div class="spinner-container" *ngIf="dataSource.loading$ | async">
	        <mat-spinner></mat-spinner>
		</div>

  		<table mat-table [dataSource]="dataSource" matSort (matSortChange)="sortData($event)" class="col-sm-12 mat-elevation-z8">
  			<ng-container matColumnDef="question">
			  	<th mat-header-cell *matHeaderCellDef>Question</th>
			  	<td mat-cell *matCellDef="let question">
			  		<img *ngIf="!question.calculator" style="margin-top: 0.25rem; margin-bottom: 0.25rem;" src="{{beURL}}{{question.question_image}}" width="200"/>

			  		<svg *ngIf="question.calculator" style="width: 3rem" aria-hidden="true" data-prefix="fas" data-icon="calculator" class="svg-inline--fa fa-calculator fa-w-14" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
			  			<path fill="currentColor" d="M400 0H48C22.4 0 0 22.4 0 48v416c0 25.6 22.4 48 48 48h352c25.6 0 48-22.4 48-48V48c0-25.6-22.4-48-48-48zM128 435.2c0 6.4-6.4 12.8-12.8 12.8H76.8c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm0-128c0 6.4-6.4 12.8-12.8 12.8H76.8c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm128 128c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm0-128c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm128 128c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8V268.8c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v166.4zm0-256c0 6.4-6.4 12.8-12.8 12.8H76.8c-6.4 0-12.8-6.4-12.8-12.8V76.8C64 70.4 70.4 64 76.8 64h294.4c6.4 0 12.8 6.4 12.8 12.8v102.4z">			  				
			  			</path>
			  		</svg>
			</ng-container>

			<ng-container matColumnDef="answer">
			  	<th mat-header-cell *matHeaderCellDef>Answer</th>
			  	<td mat-cell *matCellDef="let question">
			  		<div *ngIf="question.type.type === 'MCQ' || question.type.type === 'Number'">
			  			<div *ngIf="question.answer0" [ngClass]="{'correct-answer': question.correct_answer === 1, 'row': true}">
			  				<div class="col-sm-12">
			  					<img src="{{beURL}}{{question.answer0_image}}" [alt]="question.answer0" width="20"/>
			  				</div>
			  				<div *ngIf="question.answer0_image" class="col-sm-12">
		  						{{question.answer0}}
			  				</div>			  				
			  			</div>
			  			<div *ngIf="question.answer1" [ngClass]="{'correct-answer': question.correct_answer === 2, 'row': true}">
			  				<div class="col-sm-12">
			  					<img src="{{beURL}}{{question.answer1_image}}" [alt]="question.answer1" width="20"/>
			  				</div>
			  				<div *ngIf="question.answer1_image" class="col-sm-12">
		  						{{question.answer1}}
			  				</div>			  				
			  			</div>
			  			<div *ngIf="question.answer2" [ngClass]="{'correct-answer': question.correct_answer === 3, 'row': true}">
			  				<div class="col-sm-12">
			  					<img src="{{beURL}}{{question.answer2_image}}" [alt]="question.answer2" width="20"/>
			  				</div>
			  				<div *ngIf="question.answer2_image" class="col-sm-12">
		  						{{question.answer2}}
			  				</div>			  				
			  			</div>
			  		</div>
			  		<div *ngIf="question.type.type !== 'MCQ' && question.type.type !== 'Number'">
			  			<div *ngIf="question.correct_answer === 1" class="col-sm-12">
	  						{{question.answer0}}
		  				</div>	
		  				<div *ngIf="question.correct_answer === 2" class="col-sm-12">
	  						{{question.answer1}}
		  				</div>	
		  				<div *ngIf="question.correct_answer === 3" class="col-sm-12">
	  						{{question.answer2}}
		  				</div>	
			  		</div>
			  	</td>
			</ng-container>

			<ng-container matColumnDef="skill">
			  	<th mat-header-cell *matHeaderCellDef mat-sort-header>Skill</th>
			  	<td mat-cell *matCellDef="let question"> 
			  		<span [matTooltip]="question.skill.description">
			  			{{question.skill.skill}}
			  		</span>
			  	</td>
			</ng-container>

			<ng-container matColumnDef="track">
			  	<th mat-header-cell *matHeaderCellDef mat-sort-header>Track</th>
			  	<td mat-cell *matCellDef="let question" > 
			  		{{ (question.skill.tracks && question.skill.tracks.length > 0) ? question.skill.tracks[0].track : ''}} 
			  	</td>
			</ng-container>

			<ng-container matColumnDef="field">
			  	<th mat-header-cell *matHeaderCellDef mat-sort-header>Field</th>
			  	<td mat-cell *matCellDef="let question"> 
			  		{{ (question.skill.tracks && question.skill.tracks.length > 0) ? question.skill.tracks[0].field.field : ''}} 
			  	</td>
			</ng-container>

			<ng-container matColumnDef="level">
			  	<th mat-header-cell *matHeaderCellDef mat-sort-header>Level</th>
			  	<td mat-cell *matCellDef="let question" > 
			  		{{ (question.skill.tracks && question.skill.tracks.length > 0) ? question.skill.tracks[0].level.level : ''}} 
			  	</td>
			</ng-container>

			<ng-container matColumnDef="difficulty">
			  	<th mat-header-cell *matHeaderCellDef mat-sort-header>Difficulty</th>
			  	<td mat-cell *matCellDef="let question" > 
			  		<span [matTooltip]="question.difficulty.short_description">
			  			{{ question.difficulty.difficulty }} 
			  		</span>			  		
			  	</td>
			</ng-container>

			<ng-container matColumnDef="status">
			  	<th mat-header-cell *matHeaderCellDef mat-sort-header>Status</th>
			  	<td mat-cell *matCellDef="let question" > 
			  		<span [matTooltip]="question.status.description">
			  			{{ question.status.status }}  
			  		</span>			  		
			  	</td>
			</ng-container>

			<ng-container matColumnDef="source">
			  	<th mat-header-cell *matHeaderCellDef mat-sort-header>Source</th>
			  	<td mat-cell *matCellDef="let question" > 
			  		{{ question.source }} 
			  	</td>
			</ng-container>

			<ng-container matColumnDef="author">
			  	<th mat-header-cell *matHeaderCellDef mat-sort-header>Author</th>
			  	<td mat-cell *matCellDef="let question"> {{question.author.firstname + ' ' + question.author.lastname}} </td>
			</ng-container>  						

			<ng-container matColumnDef="action">
			  	<th mat-header-cell *matHeaderCellDef>Action</th>
			  	<td mat-cell *matCellDef="let question"> 
			  		<div class="btn-group" role="group" aria-label="First group">
		              <a matTooltip="Edit" [routerLink]="['/admin/questions/edit', question.id]" class="btn btn-info"><i class="icon_pencil"></i></a>
		             <a matTooltip="Delete" [routerLink]="['/admin/questions/delete', question.id]" class="btn btn-danger"><i class="icon_minus_alt2"></i></a>
		           </div>
			  	</td>
			</ng-container>

			<tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
			<tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  		</table> 		

	</div>
  </div>
  
</div>
<!-- /END CONTAINER -->

</section>